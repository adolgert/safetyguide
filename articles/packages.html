<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Packages • safetyguide</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Packages">
<meta property="og:description" content="Package management for research packages.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">safetyguide</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/configuration.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/documentation.html">Documentation</a>
    </li>
    <li>
      <a href="../articles/formatting.html">Formatting</a>
    </li>
    <li>
      <a href="../articles/logging.html">Logging</a>
    </li>
    <li>
      <a href="../articles/organizing.html">Organization</a>
    </li>
    <li>
      <a href="../articles/packages.html">Packages</a>
    </li>
    <li>
      <a href="../articles/provenance.html">Provenance</a>
    </li>
    <li>
      <a href="../articles/testing.html">Testing</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="packages_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Packages</h1>
            
      
      
      <div class="hidden name"><code>packages.Rmd</code></div>

    </div>

    
    
<div id="use-a-package" class="section level1">
<h1 class="hasAnchor">
<a href="#use-a-package" class="anchor"></a>Use a Package</h1>
<p>Let’s assume you have a directory full of scripts, and that these scripts are checked into git. The scripts can <code>source</code> each other, and git tracks version history. What do you gain from organizing this work in a package?</p>
<p>In R, we think of packages as libraries that we import, but packages are more than a file format for exchanging code. R provides a tools that help developers of packages, and those same tools will help you, even if you never plan to put your code on CRAN for others to use. These helpers includes:</p>
<ol style="list-style-type: decimal">
<li><p>A standard way to write and run tests. Tests go in the <code>tests/</code> subdirectory, and everybody uses the <code>testthat</code> package. If you write tests in the <a href="https://testthat.r-lib.org/"><code>testthat</code></a> directory, then RStudio will run your tests with a single command-key.</p></li>
<li><p>A standard way to build documentation. You’ve probably seen <a href="https://r-pkgs.org/man.html#man-workflow">RMarkdown</a> to document functions. If you have a package, then you can put R notebooks into the <code>vignettes/</code> subdirectory, and the <a href="https://pkgdown.r-lib.org/">pkgdown</a> package can build them into a nice webpage.</p></li>
<li><p>A namespace. All of the functions in a package, in all files, can see other functions in the package. There is no need to <code>source</code> a script in order to call its functions. This also means that you have to keep track of what packages your script uses, which makes it less likely you’ll run a cluster job, only to find a dependency is missing.</p></li>
</ol>
</div>
<div id="package-layout" class="section level1">
<h1 class="hasAnchor">
<a href="#package-layout" class="anchor"></a>Package Layout</h1>
<p>There is a standard set of directories to define in an R package, and RStudio will generate a package layout that looks like this:</p>
<ul>
<li><p>inst/ - For non-source files that should be installed with the package.</p></li>
<li><p>man/ - Where the RMarkdown function documentation will automatically go.</p></li>
<li><p>R/ - For package R source files.</p></li>
<li><p>src/ - For C++ files.</p></li>
<li><p>tests/ - Unit tests here.</p></li>
<li><p>vignettes/ - These notebooks will be used to populate the packages pkgdown page.</p></li>
</ul>
<p>I add two directories to this list.</p>
<ul>
<li><p>scripts/ - Here, I put R source files that I run on the cluster or locally. These are the scripts I invoke directly from a command line.</p></li>
<li><p>notebooks/ - I used to put all my .Rmd files into vignettes, but now pkgdown turns those into help files, which most of my notebooks aren’t, so I put them here.</p></li>
</ul>
<p>The scripts and notebooks use <code><a href="https://rdrr.io/r/base/library.html">library(mypackage)</a></code> to load the package in which they sit. That’s how they use the R source code you write. The scripts can be two-line calls into the library, or they can be longer.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">safetyguide</span><span class="op">)</span>
<span class="fu">safetyguide</span><span class="fu">::</span><span class="fu">calculate</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Whenever I write code, I’ve tried it, at least once, in a notebook. Maybe I made a plot with it or a table of values to scan. These interactive trials make good tests, if you can move them to the <code>tests/</code> directory under testthat. A high-level test, of the sort you would normally plot, is worth a raft of low-level unit tests.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andrew Dolgert.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
